#include "aaCellWater.h"
#include "aaAlgo.h"
///-------------------------------------------------------------------------




///-------------------------------------------------------------------------
using namespace Formicarium;
///-------------------------------------------------------------------------





 ///------------------------------------------------------------------------
///
///
///
/// Constructor
///
///
///-------------------------------------------------------------------------
ACellWater::ACellWater()
{





}
///-------------------------------------------------------------------------





 ///------------------------------------------------------------------------
///
///
///
/// Destructor
///
///
///-------------------------------------------------------------------------
ACellWater::~ACellWater()
{


}
///-------------------------------------------------------------------------





 ///------------------------------------------------------------------------
///
///
///
/// увелечение количества воды от 0..1
///
///
///-------------------------------------------------------------------------
void ACellWater :: appendWater(const float volume)
{
	water = true;
	waterVolume += volume;
	waterVolume = minmaxBound<float>(0.0f, 1.0f, waterVolume);
}
///-------------------------------------------------------------------------





 ///------------------------------------------------------------------------
///
///
///
/// проверим, клетка полной воды или нет
///
///
///-------------------------------------------------------------------------
bool ACellWater::isWaterFull() const
{
	return waterVolume >= 0.9999f ? true : false;
}




void ACellWater::waterMoveTo(const float timeMS, ACellWater &dest)
{
	float volume = (1.0f / 1000.0f) * timeMS;

	waterVolume -= volume;
	if (waterVolume <= 0)
	{
		volume += waterVolume;
		waterVolume = 0;
		water = false;
	}
	dest.appendWater(volume);
}